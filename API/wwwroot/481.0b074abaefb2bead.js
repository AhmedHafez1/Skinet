"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[481],{3481:(E,c,d)=>{d.r(c),d.d(c,{AccountModule:()=>V});var u=d(9808),p=d(1056),r=d(2382),i=d(4893),f=d(9479);function b(t,s){1&t&&(i.TgZ(0,"span",10),i._uU(1,"Email is required"),i.qZA())}function _(t,s){1&t&&(i.TgZ(0,"span",10),i._uU(1,"Email is not valid"),i.qZA())}function C(t,s){1&t&&(i.TgZ(0,"span",10),i._uU(1,"Password is required"),i.qZA())}const v=function(t,s){return{"is-invalid":t,"is-valid":s}};let Z=(()=>{class t{constructor(n,e,o){this.accountService=n,this.router=e,this.activatedRoute=o}ngOnInit(){this.createForm(),this.returnUrl=this.activatedRoute.snapshot.queryParams.returnUrl||"/shop"}createForm(){this.loginForm=new r.cw({email:new r.NI("",[r.kI.required,r.kI.pattern(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/)]),password:new r.NI("",[r.kI.required])})}submitForm(){this.accountService.login(this.loginForm.value).subscribe(()=>{this.router.navigateByUrl(this.returnUrl)})}isNotValid(n,e){var o,a,l;const m=null===(o=this.loginForm.get(n))||void 0===o?void 0:o.errors;return(null===(a=this.loginForm.get(n))||void 0===a?void 0:a.invalid)&&(null===(l=this.loginForm.get(n))||void 0===l?void 0:l.touched)&&(null==m?void 0:m[e])}isValidControl(n){var e,o;return(null===(e=this.loginForm.get(n))||void 0===e?void 0:e.valid)&&(null===(o=this.loginForm.get(n))||void 0===o?void 0:o.touched)}isInValidControl(n){var e,o;return(null===(e=this.loginForm.get(n))||void 0===e?void 0:e.invalid)&&(null===(o=this.loginForm.get(n))||void 0===o?void 0:o.touched)}}return t.\u0275fac=function(n){return new(n||t)(i.Y36(f.B),i.Y36(p.F0),i.Y36(p.gz))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-login"]],decls:17,vars:13,consts:[[1,"form-signin",3,"formGroup","ngSubmit"],[1,"text-center","mb-5"],[1,"h3","mb-3","font-weight-normal",2,"font-size","24px","font-weight","600","color","darkblue"],[1,"form-label-group"],["type","email","formControlName","email","id","inputEmail","placeholder","Email","required","",1,"form-control",3,"ngClass"],["for","inputEmail"],["class","invalid-feedback",4,"ngIf"],["type","password","formControlName","password","id","inputPassword","placeholder","Password","required","",1,"form-control",3,"ngClass"],["for","inputPassword"],["type","submit",1,"btn","btn-lg","btn-primary","btn-block",2,"width","100%","padding","10px 0","font-size","14px",3,"disabled"],[1,"invalid-feedback"]],template:function(n,e){1&n&&(i.TgZ(0,"form",0),i.NdJ("ngSubmit",function(){return e.submitForm()}),i.TgZ(1,"div",1)(2,"h1",2),i._uU(3," Login "),i.qZA()(),i.TgZ(4,"div",3),i._UZ(5,"input",4),i.TgZ(6,"label",5),i._uU(7,"Email address"),i.qZA(),i.YNc(8,b,2,0,"span",6),i.YNc(9,_,2,0,"span",6),i.qZA(),i.TgZ(10,"div",3),i._UZ(11,"input",7),i.TgZ(12,"label",8),i._uU(13,"Password"),i.qZA(),i.YNc(14,C,2,0,"span",6),i.qZA(),i.TgZ(15,"button",9),i._uU(16," Log In "),i.qZA()()),2&n&&(i.Q6J("formGroup",e.loginForm),i.xp6(5),i.Q6J("ngClass",i.WLB(7,v,e.isInValidControl("email"),e.isValidControl("email"))),i.xp6(3),i.Q6J("ngIf",e.isNotValid("email","required")),i.xp6(1),i.Q6J("ngIf",e.isNotValid("email","pattern")),i.xp6(2),i.Q6J("ngClass",i.WLB(10,v,e.isInValidControl("password"),e.isValidControl("password"))),i.xp6(3),i.Q6J("ngIf",e.isNotValid("password","required")),i.xp6(1),i.Q6J("disabled",e.loginForm.invalid))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.Q7,u.mk,u.O5],styles:[".invalid-feedback[_ngcontent-%COMP%]{font-size:13px}"]}),t})();var h=d(4004);function F(t,s){1&t&&(i.TgZ(0,"span",15),i._uU(1,"Name is required"),i.qZA())}function N(t,s){1&t&&i._UZ(0,"div",16)}function T(t,s){1&t&&(i.TgZ(0,"span",15),i._uU(1,"Email is required"),i.qZA())}function q(t,s){1&t&&(i.TgZ(0,"span",15),i._uU(1,"Email is not valid"),i.qZA())}function w(t,s){1&t&&(i.TgZ(0,"span",15),i._uU(1,"Email is in Use"),i.qZA())}function A(t,s){1&t&&(i.TgZ(0,"span",15),i._uU(1,"Password is required"),i.qZA())}function U(t,s){if(1&t&&(i.TgZ(0,"li"),i._uU(1),i.qZA()),2&t){const n=s.$implicit;i.xp6(1),i.Oqu(n)}}const g=function(t,s){return{"is-invalid":t,"is-valid":s}},I=[{path:"login",component:Z,data:{breadcrumb:"Login"}},{path:"register",component:(()=>{class t{constructor(n,e,o){this.fb=n,this.accountService=e,this.router=o,this.errors=[]}ngOnInit(){this.createRegisterForm()}createRegisterForm(){this.registerForm=this.fb.group({displayName:[null,[r.kI.required]],email:[null,[r.kI.required,r.kI.pattern(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/)],[this.validateEmailNotTaken.bind(this)]],password:[null,[r.kI.required]]})}submitForm(){this.accountService.register(this.registerForm.value).subscribe({next:()=>{this.router.navigateByUrl("/shop")},error:n=>{this.errors=n.errors}})}isNotValid(n,e){var o,a,l;const m=null===(o=this.registerForm.get(n))||void 0===o?void 0:o.errors;return(null===(a=this.registerForm.get(n))||void 0===a?void 0:a.invalid)&&(null===(l=this.registerForm.get(n))||void 0===l?void 0:l.touched)&&(null==m?void 0:m[e])}isNotValidAsync(n,e){var o,a;const l=null===(o=this.registerForm.get(n))||void 0===o?void 0:o.errors;return(null===(a=this.registerForm.get(n))||void 0===a?void 0:a.invalid)&&(null==l?void 0:l[e])}isValidControl(n){var e,o;return(null===(e=this.registerForm.get(n))||void 0===e?void 0:e.valid)&&(null===(o=this.registerForm.get(n))||void 0===o?void 0:o.touched)}isInValidControl(n){var e,o;return(null===(e=this.registerForm.get(n))||void 0===e?void 0:e.invalid)&&(null===(o=this.registerForm.get(n))||void 0===o?void 0:o.touched)}validateEmailNotTaken(n){return this.accountService.checkEmailExists(n.value).pipe((0,h.U)(e=>e?{emailExist:!0}:null))}validateEmailNotTakenArrowFn(){return n=>this.accountService.checkEmailExists(n.value).pipe((0,h.U)(e=>e?{emailExist:!0}:null))}}return t.\u0275fac=function(n){return new(n||t)(i.Y36(r.qu),i.Y36(f.B),i.Y36(p.F0))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-register"]],decls:26,vars:21,consts:[[1,"form-signin",3,"formGroup","ngSubmit"],[1,"text-center","mb-5"],[1,"h3","mb-3","font-weight-normal",2,"font-size","24px","font-weight","600","color","darkblue"],[1,"form-label-group"],["type","text","formControlName","displayName","id","inputName","placeholder","Name","required","",1,"form-control",3,"ngClass"],["for","inputName"],["class","invalid-feedback",4,"ngIf"],["type","email","formControlName","email","id","inputEmail","placeholder","Email","required","",1,"form-control",3,"ngClass"],["class","fa fa-spinner fa-spin loader",4,"ngIf"],["for","inputEmail"],["type","password","formControlName","password","id","inputPassword","placeholder","Password","required","",1,"form-control",3,"ngClass"],["for","inputPassword"],[1,"text-danger","list-unstyled"],[4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-lg","btn-primary","btn-block",2,"width","100%","padding","10px 0","font-size","14px",3,"disabled"],[1,"invalid-feedback"],[1,"fa","fa-spinner","fa-spin","loader"]],template:function(n,e){if(1&n&&(i.TgZ(0,"form",0),i.NdJ("ngSubmit",function(){return e.submitForm()}),i.TgZ(1,"div",1)(2,"h1",2),i._uU(3," Sign Up "),i.qZA()(),i.TgZ(4,"div",3),i._UZ(5,"input",4),i.TgZ(6,"label",5),i._uU(7,"Name"),i.qZA(),i.YNc(8,F,2,0,"span",6),i.qZA(),i.TgZ(9,"div",3),i._UZ(10,"input",7),i.YNc(11,N,1,0,"div",8),i.TgZ(12,"label",9),i._uU(13,"Email address"),i.qZA(),i.YNc(14,T,2,0,"span",6),i.YNc(15,q,2,0,"span",6),i.YNc(16,w,2,0,"span",6),i.qZA(),i.TgZ(17,"div",3),i._UZ(18,"input",10),i.TgZ(19,"label",11),i._uU(20,"Password"),i.qZA(),i.YNc(21,A,2,0,"span",6),i.qZA(),i.TgZ(22,"ul",12),i.YNc(23,U,2,1,"li",13),i.qZA(),i.TgZ(24,"button",14),i._uU(25," Sign Up "),i.qZA()()),2&n){let o;i.Q6J("formGroup",e.registerForm),i.xp6(5),i.Q6J("ngClass",i.WLB(12,g,e.isInValidControl("displayName"),e.isValidControl("displayName"))),i.xp6(3),i.Q6J("ngIf",e.isNotValid("displayName","required")),i.xp6(2),i.Q6J("ngClass",i.WLB(15,g,e.isInValidControl("email"),e.isValidControl("email"))),i.xp6(1),i.Q6J("ngIf","PENDING"===(null==(o=e.registerForm.get("email"))?null:o.status)),i.xp6(3),i.Q6J("ngIf",e.isNotValid("email","required")),i.xp6(1),i.Q6J("ngIf",e.isNotValid("email","pattern")),i.xp6(1),i.Q6J("ngIf",e.isNotValidAsync("email","emailExist")),i.xp6(2),i.Q6J("ngClass",i.WLB(18,g,e.isInValidControl("password"),e.isValidControl("password"))),i.xp6(3),i.Q6J("ngIf",e.isNotValid("password","required")),i.xp6(2),i.Q6J("ngForOf",e.errors),i.xp6(1),i.Q6J("disabled",e.registerForm.invalid)}},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.Q7,u.mk,u.O5,u.sg],styles:[".loader[_ngcontent-%COMP%]{position:absolute;top:20px;right:6px;font-size:14px}.invalid-feedback[_ngcontent-%COMP%]{font-size:13px}"]}),t})(),data:{breadcrumb:"Register"}},{path:"**",redirectTo:"/login",pathMatch:"full"}];let y=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[u.ez,p.Bz.forChild(I)],p.Bz]}),t})();var J=d(4466);let V=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[u.ez,y,J.m]]}),t})()}}]);